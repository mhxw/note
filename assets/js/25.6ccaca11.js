(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{439:function(t,a,e){"use strict";e.r(a);var s=e(11),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("写一个简易脚本用来自动获取进程id并优雅关闭进程")]),t._v(" "),e("h2",{attrs:{id:"思路"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#思路"}},[t._v("#")]),t._v(" 思路")]),t._v(" "),e("p",[t._v("1、先获取进程id的方法，可以采用"),e("code",[t._v("awk")]),t._v("命令来获取")]),t._v(" "),e("blockquote",[e("p",[t._v("这里要把这个grep这个用 -v 来过滤掉，然后用awk命令，提取第2个参数就是进程id了")])]),t._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[t._v("ps -ef | grep 你的进程 | grep -v grep | awk '{print $2}'\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("关闭进程")])]),t._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[t._v("kill -15 你的进程id\n")])])]),e("h2",{attrs:{id:"脚本代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚本代码"}},[t._v("#")]),t._v(" 脚本代码")]),t._v(" "),e("blockquote",[e("p",[t._v("注意：使用时，需要把第一行的 sp-tomcat 替换换成你希望杀的进程")])]),t._v(" "),e("blockquote",[e("p",[t._v("说明：可能有人会说查找进程出现多个进程id时，脚本会报错的。其实是不会的，出现多个进程id时，他们之间是有空格隔开来了的。刚好kill命令一次杀多个进程时，进程id需要用空格。所以不需要用for循环来杀进程")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('mhxw_pid=`ps -ef | grep sp-tomcat | grep -v grep | awk \'{print $2}\'`\nif [ -z "$mhxw_pid" ];\nthen\n  echo "[ not find sp-tomcat pid ]"\nelse\n  echo "find result: $sp_pid "\n  kill -15 $sp_pid\nfi\n')])])])])}),[],!1,null,null,null);a.default=r.exports}}]);