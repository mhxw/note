(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{442:function(s,t,e){"use strict";e.r(t);var a=e(11),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("Pushgateway是Prometheus下的一个组件，用来当做采集对象和Prometheus的代理，Prometheus会定时的从gateway上面pull数据。\n由于服务部署在容器中，服务的ip会经常的变化，导致Prometheus无法直接拉取到每个target的数据。\n问题：\n多个服务的数据，推送到Pushgateway，如果push挂了，影响比较大")]),s._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("ul",[e("li",[s._v("源码地址：")])]),s._v(" "),e("p",[s._v("https://github.com/prometheus/pushgateway")]),s._v(" "),e("ul",[e("li",[s._v("解压")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf pushgateway-1.4.1.linux-amd64.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" pushgateway-1.4.1.linux-amd64 pushgateway\n")])])]),e("ul",[e("li",[s._v("启动")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./pushgateway --web.listen-address"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('":18091"')]),s._v(" --web.telemetry-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/metrics"')]),s._v(" --persistence.interval"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5m --persistence.file"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistence-data"')]),s._v("\n")])])]),e("p",[s._v("参数说明")]),s._v(" "),e("ul",[e("li",[s._v("--web.listen-address：#指定服务端口")]),s._v(" "),e("li",[s._v("--web.telemetry-path：指定暴露出去的接口")]),s._v(" "),e("li",[s._v("--persistence.interval：持久化存储的间隔时间")]),s._v(" "),e("li",[s._v("--persistence.file：持久化存储的地址")])]),s._v(" "),e("h3",{attrs:{id:"重新配置prometheus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重新配置prometheus"}},[s._v("#")]),s._v(" 重新配置Prometheus")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("  - job_name: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pushgateway"')]),s._v("\n    honor_labels: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    honor_timestamps: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    static_configs:\n    - targets: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:9091"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);